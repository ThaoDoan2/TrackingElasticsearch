get iap/_search
{
  "size":0,
  "query": {
    "range": {
      "date": {
        "gte": "2026-01-01",
        "lte": "2026-02-11"
      }
    }
  },
  
  "aggs":{
    "transaction_per_day":{
      "date_histogram":{
        "field":"date",
        "calendar_interval": "day"
      },
      "aggs":{
        "by_product":{
          "terms":{
            "field": "productId.keyword",
            "size": 10
          }
        }
      }
    }
  }
}

get iap/_mapping